{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mehmetemiryasar/w2p/apps/web/lib/socket.ts"],"sourcesContent":["import { io, Socket } from 'socket.io-client';\nimport type { RoomState, Action } from '@w2p/shared';\n\nfunction getSocketUrl(): string {\n\t// Use env var if explicitly set\n\tif (process.env.NEXT_PUBLIC_SOCKET_URL) {\n\t\treturn process.env.NEXT_PUBLIC_SOCKET_URL;\n\t}\n\n\t// In browser, auto-detect from current location\n\tif (typeof window !== 'undefined') {\n\t\tconst protocol = window.location.protocol === 'https:' ? 'https' : 'http';\n\t\tconst hostname = window.location.hostname;\n\t\t// Use same hostname, port 3001\n\t\t// In production (no port in URL), assume socket server is on same domain or use port 3001\n\t\tconst port = window.location.port ? ':3001' : ':3001';\n\t\treturn `${protocol}://${hostname}${port}`;\n\t}\n\n\t// Server-side fallback (development only)\n\treturn 'http://localhost:3001';\n}\n\nexport const SOCKET_URL = getSocketUrl();\n\nlet socket: Socket | null = null;\n\nexport function getSocket(): Socket {\n\tif (!socket) {\n\t\tconsole.log('Creating new socket connection to:', SOCKET_URL);\n\t\tsocket = io(SOCKET_URL, {\n\t\t\ttransports: ['websocket', 'polling'],\n\t\t\treconnection: true,\n\t\t\treconnectionDelay: 1000,\n\t\t\treconnectionAttempts: 5,\n\t\t\tautoConnect: true,\n\t\t});\n\n\t\tsocket.on('connect', () => {\n\t\t\tconsole.log('Socket connected:', socket?.id);\n\t\t});\n\n\t\tsocket.on('disconnect', (reason) => {\n\t\t\tconsole.log('Socket disconnected:', reason);\n\t\t});\n\n\t\tsocket.on('connect_error', (error) => {\n\t\t\tconsole.error('Socket connection error:', error.message, error);\n\t\t});\n\n\t\tsocket.on('reconnect', (attemptNumber) => {\n\t\t\tconsole.log('Socket reconnected after', attemptNumber, 'attempts');\n\t\t});\n\n\t\tsocket.on('reconnect_error', (error) => {\n\t\t\tconsole.error('Socket reconnection error:', error);\n\t\t});\n\n\t\tsocket.on('reconnect_failed', () => {\n\t\t\tconsole.error('Socket reconnection failed');\n\t\t});\n\t}\n\treturn socket;\n}\n\nexport function disconnectSocket(): void {\n\tif (socket) {\n\t\tsocket.disconnect();\n\t\tsocket = null;\n\t}\n}\n\nexport function emitAction(action: Action): void {\n\tconst s = getSocket();\n\ts.emit('game:action', action);\n}\n\nexport function onRoomState(callback: (state: RoomState) => void): () => void {\n\tconst s = getSocket();\n\ts.on('room:state', callback);\n\treturn () => s.off('room:state', callback);\n}\n\nexport function onError(callback: (error: { message: string }) => void): () => void {\n\tconst s = getSocket();\n\ts.on('error', callback);\n\treturn () => s.off('error', callback);\n}\n\nexport function onJoinSuccess(callback: (data: { playerId: string; token: string }) => void): () => void {\n\tconst s = getSocket();\n\ts.on('join:success', callback);\n\treturn () => s.off('join:success', callback);\n}\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAKK;AALL;;AAGA,SAAS;IACR,gCAAgC;IAChC,IAAI,2KAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE;QACvC,OAAO,2KAAO,CAAC,GAAG,CAAC,sBAAsB;IAC1C;IAEA,gDAAgD;IAChD,wCAAmC;QAClC,MAAM,WAAW,OAAO,QAAQ,CAAC,QAAQ,KAAK,WAAW,UAAU;QACnE,MAAM,WAAW,OAAO,QAAQ,CAAC,QAAQ;QACzC,+BAA+B;QAC/B,0FAA0F;QAC1F,MAAM,OAAO,OAAO,QAAQ,CAAC,IAAI,GAAG,UAAU;QAC9C,OAAO,GAAG,SAAS,GAAG,EAAE,WAAW,MAAM;IAC1C;;;AAID;AAEO,MAAM,aAAa;AAE1B,IAAI,SAAwB;AAErB,SAAS;IACf,IAAI,CAAC,QAAQ;QACZ,QAAQ,GAAG,CAAC,sCAAsC;QAClD,SAAS,IAAA,wLAAE,EAAC,YAAY;YACvB,YAAY;gBAAC;gBAAa;aAAU;YACpC,cAAc;YACd,mBAAmB;YACnB,sBAAsB;YACtB,aAAa;QACd;QAEA,OAAO,EAAE,CAAC,WAAW;YACpB,QAAQ,GAAG,CAAC,qBAAqB,QAAQ;QAC1C;QAEA,OAAO,EAAE,CAAC,cAAc,CAAC;YACxB,QAAQ,GAAG,CAAC,wBAAwB;QACrC;QAEA,OAAO,EAAE,CAAC,iBAAiB,CAAC;YAC3B,QAAQ,KAAK,CAAC,4BAA4B,MAAM,OAAO,EAAE;QAC1D;QAEA,OAAO,EAAE,CAAC,aAAa,CAAC;YACvB,QAAQ,GAAG,CAAC,4BAA4B,eAAe;QACxD;QAEA,OAAO,EAAE,CAAC,mBAAmB,CAAC;YAC7B,QAAQ,KAAK,CAAC,8BAA8B;QAC7C;QAEA,OAAO,EAAE,CAAC,oBAAoB;YAC7B,QAAQ,KAAK,CAAC;QACf;IACD;IACA,OAAO;AACR;AAEO,SAAS;IACf,IAAI,QAAQ;QACX,OAAO,UAAU;QACjB,SAAS;IACV;AACD;AAEO,SAAS,WAAW,MAAc;IACxC,MAAM,IAAI;IACV,EAAE,IAAI,CAAC,eAAe;AACvB;AAEO,SAAS,YAAY,QAAoC;IAC/D,MAAM,IAAI;IACV,EAAE,EAAE,CAAC,cAAc;IACnB,OAAO,IAAM,EAAE,GAAG,CAAC,cAAc;AAClC;AAEO,SAAS,QAAQ,QAA8C;IACrE,MAAM,IAAI;IACV,EAAE,EAAE,CAAC,SAAS;IACd,OAAO,IAAM,EAAE,GAAG,CAAC,SAAS;AAC7B;AAEO,SAAS,cAAc,QAA6D;IAC1F,MAAM,IAAI;IACV,EAAE,EAAE,CAAC,gBAAgB;IACrB,OAAO,IAAM,EAAE,GAAG,CAAC,gBAAgB;AACpC"}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///Users/mehmetemiryasar/w2p/apps/web/app/room/%5Bcode%5D/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useParams, useRouter } from 'next/navigation';\nimport { getSocket, onRoomState, onError, emitAction } from '@/lib/socket';\nimport type { RoomState } from '@w2p/shared';\n\nexport default function RoomPage() {\n\tconst params = useParams();\n\tconst router = useRouter();\n\tconst code = params.code as string;\n\tconst [room, setRoom] = useState<RoomState | null>(null);\n\tconst [error, setError] = useState<string | null>(null);\n\tconst [answer, setAnswer] = useState('');\n\tconst [submitted, setSubmitted] = useState(false);\n\n\tuseEffect(() => {\n\t\tconst playerId = localStorage.getItem('playerId');\n\t\tconst token = localStorage.getItem('playerToken');\n\t\tconst playerName = localStorage.getItem('playerName') || 'Player';\n\n\t\tif (!playerId || !token) {\n\t\t\trouter.push('/');\n\t\t\treturn;\n\t\t}\n\n\t\tconst socket = getSocket();\n\n\t\tconst unsubscribeState = onRoomState((state) => {\n\t\t\tsetRoom(state);\n\t\t\t// Check if player has submitted answer\n\t\t\tif (state.phase === 'IN_ROUND' && state.roundState) {\n\t\t\t\tconst roundState = state.roundState as { answers?: Record<string, string> };\n\t\t\t\tif (roundState.answers && roundState.answers[playerId]) {\n\t\t\t\t\tsetSubmitted(true);\n\t\t\t\t} else {\n\t\t\t\t\tsetSubmitted(false);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetSubmitted(false);\n\t\t\t}\n\t\t});\n\n\t\tconst unsubscribeError = onError((err) => {\n\t\t\tsetError(err.message);\n\t\t});\n\n\t\tsocket.emit('join', {\n\t\t\tcode: code.toUpperCase(),\n\t\t\tplayerId,\n\t\t\ttoken,\n\t\t\tname: playerName,\n\t\t});\n\n\t\treturn () => {\n\t\t\tunsubscribeState();\n\t\t\tunsubscribeError();\n\t\t};\n\t}, [code, router]);\n\n\tconst handleStartGame = () => {\n\t\temitAction({\n\t\t\ttype: 'START_GAME',\n\t\t\tpayload: { gameId: 'HERD_MENTALITY' },\n\t\t});\n\t};\n\n\tconst handleSubmitAnswer = () => {\n\t\tif (!answer.trim()) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if answer was already used\n\t\tif (roundState?.previousAnswers?.[playerId]) {\n\t\t\tconst normalizedAnswer = answer.trim().toLowerCase();\n\t\t\tif (roundState.previousAnswers[playerId].includes(normalizedAnswer)) {\n\t\t\t\tsetError('You cannot use the same answer twice!');\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\temitAction({\n\t\t\ttype: 'SUBMIT_ANSWER',\n\t\t\tpayload: { answer: answer.trim() },\n\t\t});\n\t\tsetSubmitted(true);\n\t\tsetError(null);\n\t};\n\n\tconst handleReveal = () => {\n\t\temitAction({\n\t\t\ttype: 'REVEAL',\n\t\t\tpayload: {},\n\t\t});\n\t};\n\n\tconst handleNextTry = () => {\n\t\temitAction({\n\t\t\ttype: 'NEXT_TRY',\n\t\t\tpayload: {},\n\t\t});\n\t\tsetAnswer('');\n\t\tsetSubmitted(false);\n\t};\n\n\tconst handleNextRound = () => {\n\t\temitAction({\n\t\t\ttype: 'NEXT_ROUND',\n\t\t\tpayload: {},\n\t\t});\n\t\tsetAnswer('');\n\t\tsetSubmitted(false);\n\t};\n\n\tif (!room) {\n\t\treturn (\n\t\t\t<div className=\"flex min-h-screen items-center justify-center relative z-10\">\n\t\t\t\t<div className=\"text-center relative z-10 bg-white/80 backdrop-blur-sm rounded-lg px-8 py-4 shadow-lg\">\n\t\t\t\t\t<p className=\"text-gray-600\">Loading room...</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst playerId = localStorage.getItem('playerId') || '';\n\tconst isHost = room.hostId === playerId;\n\tconst roundState = room.roundState as\n\t\t| {\n\t\t\tprompt?: string;\n\t\t\tanswers?: Record<string, string>;\n\t\t\tscores?: Record<string, number>;\n\t\t\ttryNumber?: number;\n\t\t\tpreviousAnswers?: Record<string, string[]>;\n\t\t}\n\t\t| null;\n\n\treturn (\n\t\t<div className=\"flex min-h-screen flex-col relative z-10\">\n\t\t\t<div className=\"border-b-4 border-purple-500 px-6 py-4 bg-gradient-to-r from-purple-50/90 to-pink-50/90 backdrop-blur-sm relative z-10\">\n\t\t\t\t<div className=\"max-w-4xl mx-auto flex items-center justify-between\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h1 className=\"text-2xl font-bold text-black\">Room: {room.code}</h1>\n\t\t\t\t\t\t<p className=\"text-sm text-gray-600\">\n\t\t\t\t\t\t\t{room.players.length} player{room.players.length !== 1 ? 's' : ''}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t{isHost && <span className=\"text-sm text-purple-600 font-semibold bg-purple-100 px-3 py-1 rounded-full border-2 border-purple-400\">Host</span>}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{error && (\n\t\t\t\t<div className=\"bg-red-100 border-2 border-red-500 text-red-700 px-4 py-3 mx-6 mt-4 rounded-lg\">\n\t\t\t\t\t{error}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<div className=\"flex-1 max-w-4xl mx-auto w-full px-6 py-8 bg-white/60 backdrop-blur-sm rounded-lg shadow-lg my-4\">\n\t\t\t\t{room.phase === 'LOBBY' && (\n\t\t\t\t\t<div className=\"space-y-6\">\n\t\t\t\t\t\t<h2 className=\"text-xl font-semibold text-black\">Players</h2>\n\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t{room.players.map((player, index) => {\n\t\t\t\t\t\t\t\tconst colors = [\n\t\t\t\t\t\t\t\t\t'border-blue-400 bg-blue-50',\n\t\t\t\t\t\t\t\t\t'border-green-400 bg-green-50',\n\t\t\t\t\t\t\t\t\t'border-yellow-400 bg-yellow-50',\n\t\t\t\t\t\t\t\t\t'border-pink-400 bg-pink-50',\n\t\t\t\t\t\t\t\t\t'border-purple-400 bg-purple-50',\n\t\t\t\t\t\t\t\t\t'border-orange-400 bg-orange-50',\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\tconst colorClass = colors[index % colors.length];\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tkey={player.id}\n\t\t\t\t\t\t\t\t\t\tclassName={`flex items-center justify-between p-4 rounded-lg border-2 ${colorClass}`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-gray-900 font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t{player.name} {player.id === room.hostId && <span className=\"text-purple-600\">(Host)</span>}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-gray-700 font-semibold\">Score: {player.score}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{isHost && (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tonClick={handleStartGame}\n\t\t\t\t\t\t\t\tclassName=\"w-full px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg border-2 border-purple-600 hover:from-purple-600 hover:to-pink-600 transition-all font-semibold shadow-lg\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tStart Game (Herd Mentality)\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{room.phase === 'IN_ROUND' && roundState && (\n\t\t\t\t\t<div className=\"space-y-6\">\n\t\t\t\t\t\t<div className=\"text-center p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border-2 border-blue-400\">\n\t\t\t\t\t\t\t<h2 className=\"text-2xl font-bold text-black mb-2\">\n\t\t\t\t\t\t\t\t{roundState.prompt}\n\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t<p className=\"text-sm text-gray-600 mb-4 font-semibold\">\n\t\t\t\t\t\t\t\tTry {roundState.tryNumber || 1} of 3\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{roundState.previousAnswers && roundState.previousAnswers[playerId] && roundState.previousAnswers[playerId].length > 0 && (\n\t\t\t\t\t\t\t<div className=\"bg-yellow-50 border-2 border-yellow-400 p-4 rounded-lg\">\n\t\t\t\t\t\t\t\t<p className=\"text-sm font-semibold text-yellow-900 mb-2\">\n\t\t\t\t\t\t\t\t\tYour previous answers (can&apos;t reuse):\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-yellow-800\">\n\t\t\t\t\t\t\t\t\t{roundState.previousAnswers[playerId].join(', ')}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{!submitted ? (\n\t\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={answer}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setAnswer(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder=\"Your answer...\"\n\t\t\t\t\t\t\t\t\tclassName=\"w-full px-4 py-3 border-2 border-green-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-600 bg-white text-black\"\n\t\t\t\t\t\t\t\t\tonKeyDown={(e) => {\n\t\t\t\t\t\t\t\t\t\tif (e.key === 'Enter' && answer.trim()) {\n\t\t\t\t\t\t\t\t\t\t\thandleSubmitAnswer();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tonClick={handleSubmitAnswer}\n\t\t\t\t\t\t\t\t\tdisabled={!answer.trim()}\n\t\t\t\t\t\t\t\t\tclassName=\"w-full px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg border-2 border-green-600 hover:from-green-600 hover:to-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all font-semibold shadow-lg\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSubmit Answer\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"text-center py-8 bg-blue-50 border-2 border-blue-400 rounded-lg\">\n\t\t\t\t\t\t\t\t<p className=\"text-lg text-blue-800 font-semibold\">\n\t\t\t\t\t\t\t\t\tWaiting for other players...\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{isHost && (\n\t\t\t\t\t\t\t<div className=\"mt-8\">\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-gray-600 mb-2 font-semibold\">\n\t\t\t\t\t\t\t\t\t{Object.keys(roundState.answers || {}).length} / {room.players.length} answers\n\t\t\t\t\t\t\t\t\tsubmitted\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t{Object.keys(roundState.answers || {}).length === room.players.length && (\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tonClick={handleReveal}\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-full px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg border-2 border-orange-600 hover:from-orange-600 hover:to-red-600 transition-all font-semibold shadow-lg\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tReveal Answers\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{room.phase === 'REVEAL' && roundState && (\n\t\t\t\t\t<div className=\"space-y-6\">\n\t\t\t\t\t\t<h2 className=\"text-xl font-semibold text-black\">Answers</h2>\n\n\t\t\t\t\t\t{/* Group answers */}\n\t\t\t\t\t\t{(() => {\n\t\t\t\t\t\t\tconst answers = roundState.answers || {};\n\t\t\t\t\t\t\tconst answerGroups = new Map<string, string[]>();\n\t\t\t\t\t\t\tfor (const [playerId, answer] of Object.entries(answers)) {\n\t\t\t\t\t\t\t\tconst normalized = answer.toLowerCase().trim();\n\t\t\t\t\t\t\t\tif (!answerGroups.has(normalized)) {\n\t\t\t\t\t\t\t\t\tanswerGroups.set(normalized, []);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tanswerGroups.get(normalized)!.push(playerId);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst maxGroupSize = Math.max(...Array.from(answerGroups.values()).map((g) => g.length), 0);\n\t\t\t\t\t\t\t// Count how many groups have the max size\n\t\t\t\t\t\t\tconst groupsWithMaxSize = Array.from(answerGroups.values()).filter((g) => g.length === maxGroupSize).length;\n\t\t\t\t\t\t\t// Winner only if there's exactly one group with max size AND max size > 1 (clear herd, not all unique)\n\t\t\t\t\t\t\tconst hasClearHerd = groupsWithMaxSize === 1 && maxGroupSize > 1;\n\t\t\t\t\t\t\tconst allUnique = maxGroupSize === 1;\n\t\t\t\t\t\t\tconst hasTie = groupsWithMaxSize > 1 && maxGroupSize > 1;\n\t\t\t\t\t\t\t// Check for 100% match (all players gave the same answer)\n\t\t\t\t\t\t\tconst isPerfectMatch = answerGroups.size === 1 && maxGroupSize === room.players.length;\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t\t\t{isPerfectMatch && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"bg-green-100 border-2 border-green-500 p-4 rounded-lg\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-semibold text-green-800\">\n\t\t\t\t\t\t\t\t\t\t\t\tðŸŽ‰ Perfect Match! All players gave the same answer. Round complete!\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{!hasClearHerd && !isPerfectMatch && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"bg-yellow-100 border-2 border-yellow-500 p-4 rounded-lg\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-yellow-800\">\n\t\t\t\t\t\t\t\t\t\t\t\t{allUnique\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'All answers are unique - no points awarded this try.'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: hasTie\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'Multiple answers tied for largest group - no herd exists, no points awarded.'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'No clear herd - no points awarded this try.'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{Array.from(answerGroups.entries()).map(([answer, playerIds], index) => {\n\t\t\t\t\t\t\t\t\t\t// Winner only if clear herd exists and this is that group\n\t\t\t\t\t\t\t\t\t\tconst isWinner = hasClearHerd && playerIds.length === maxGroupSize;\n\t\t\t\t\t\t\t\t\t\tconst players = playerIds.map((pid) => room.players.find((p) => p.id === pid)).filter(Boolean);\n\t\t\t\t\t\t\t\t\t\tconst colors = [\n\t\t\t\t\t\t\t\t\t\t\t'border-blue-400 bg-blue-50',\n\t\t\t\t\t\t\t\t\t\t\t'border-purple-400 bg-purple-50',\n\t\t\t\t\t\t\t\t\t\t\t'border-pink-400 bg-pink-50',\n\t\t\t\t\t\t\t\t\t\t\t'border-orange-400 bg-orange-50',\n\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t\tconst colorClass = colors[index % colors.length];\n\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tkey={answer}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={`p-4 rounded-lg border-2 ${isWinner\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'bg-green-100 border-green-500'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: colorClass\n\t\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className={`font-semibold mb-2 ${isWinner ? 'text-green-900' : 'text-gray-900'}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{answer} {isWinner && 'âœ“ Winner!'}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className={`text-sm ${isWinner ? 'text-green-800' : 'text-gray-700'}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{players.map((p) => p?.name).join(', ')} ({playerIds.length})\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})()}\n\n\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t<h3 className=\"text-lg font-semibold text-black\">Scores</h3>\n\t\t\t\t\t\t\t{room.players\n\t\t\t\t\t\t\t\t.sort((a, b) => b.score - a.score)\n\t\t\t\t\t\t\t\t.map((player, index) => {\n\t\t\t\t\t\t\t\t\tconst colors = [\n\t\t\t\t\t\t\t\t\t\t'border-yellow-400 bg-yellow-50',\n\t\t\t\t\t\t\t\t\t\t'border-blue-400 bg-blue-50',\n\t\t\t\t\t\t\t\t\t\t'border-green-400 bg-green-50',\n\t\t\t\t\t\t\t\t\t\t'border-purple-400 bg-purple-50',\n\t\t\t\t\t\t\t\t\t\t'border-pink-400 bg-pink-50',\n\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\tconst colorClass = colors[index % colors.length];\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tkey={player.id}\n\t\t\t\t\t\t\t\t\t\t\tclassName={`flex items-center justify-between p-3 rounded-lg border-2 ${colorClass}`}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-gray-900 font-medium\">{player.name}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-gray-700 font-semibold\">{player.score} points</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{isHost && (\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t{roundState.tryNumber && roundState.tryNumber < 3 ? (\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tonClick={handleNextTry}\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg border-2 border-blue-600 hover:from-blue-600 hover:to-cyan-600 transition-all font-semibold shadow-lg\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tNext Try ({roundState.tryNumber + 1} of 3)\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tonClick={handleNextRound}\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-full px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg border-2 border-purple-600 hover:from-purple-600 hover:to-pink-600 transition-all font-semibold shadow-lg\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tNext Question\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\n"],"names":[],"mappings":"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"}}]
}